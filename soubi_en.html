<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spec Input Tool</title>
  <style>
    html, body { height: 100%; margin: 0; }
    #app { width: 100%; height: 100%; border: 0; display: block; }
  </style>
</head>
<body>
  <!-- æ—¥æœ¬èªžç‰ˆã‚’ãã®ã¾ã¾èª­ã¿è¾¼ã¿ï¼ˆè¦‹ãŸç›®ãƒ»æ©Ÿèƒ½ã¯å®Œå…¨åŒã˜ï¼‰ -->
  <iframe id="app" src="soubi.html?v=10" title="Spec Input Tool"></iframe>

  <script>
  (function () {
    const replacements = new Map([
      ["è£…å‚™å…¥åŠ›ãƒ„ãƒ¼ãƒ«","Spec Input Tool"],
      ["è£…å‚™å…¥åŠ›","Spec Input"],
      ["ã‚¹ãƒšãƒƒã‚¯å…¥åŠ›","Spec Input"],
      ["ä»•æ§˜å…¥åŠ›","Spec Input"],
      ["è£…å‚™ã‚’é¸æŠžã—ã¦ãã ã•ã„","Select specs below"],
      ["å¿…è¦ãªè£…å‚™ã‚’é¸ã‚“ã§ãã ã•ã„","Select the required specs"],
      ["ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦è¿½åŠ ","Tap buttons below to add"],
      ["æ‰‹å‹•å…¥åŠ›","Manual Input"],
      ["æ‰‹å‹•å…¥åŠ›æ¬„","Manual Input"],
      ["è‡ªç”±å…¥åŠ›","Free Input"],
      ["ã‚³ãƒ”ãƒ¼","COPY"],            // ãƒœã‚¿ãƒ³è¡¨ç¤º
      ["COPYã—ã¾ã—ãŸï¼","Copied!"],  // soubi.htmlã§ã®è‹±æ—¥æ··åœ¨å¯¾å¿œ
      ["ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼","Copied!"], // å®Œå…¨æ—¥æœ¬èªžãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚å¯¾å¿œ
      ["ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ","Copied!"],   // æœ«å°¾ã«ï¼ãŒãªã„å ´åˆã‚‚å¯¾å¿œ
      ["å…¨å‰Šé™¤","CLEAR"],
      ["å…¨ã¦Clear","CLEAR"],
      ["å‰Šé™¤","Delete Last"],
      ["ã‚¯ãƒªã‚¢","Clear"],
      ["ã‚¢ãƒ³ãƒ‰ã‚¥","Undo"],
      ["ã‚„ã‚Šç›´ã—","Redo"],
      ["ä¸¦ã³æ›¿ãˆ","Sort"],
      ["å¹…ã‚’æƒãˆã‚‹","Align Width"],
      ["å¹…ã‚’è‡ªå‹•èª¿æ•´","Auto Width"],
      ["å‰Šé™¤ã—ã¾ã—ãŸ","Deleted."],
      ["æœ€å¾Œã®é …ç›®ã‚’å‰Šé™¤ã—ã¾ã—ãŸ","Deleted the last item."],
      ["å…¨ã¦ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ","Cleared all."],
      ["é‡è¤‡ã§ã™","Duplicate."],
      ["ã™ã§ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™","Already added."],
      ["å…¥åŠ›ã—ã¦ãã ã•ã„","Please enter a value."],
      ["å…¨å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ","Do you want to clear all specs?"],
      ["æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ","Are you sure you want to delete this?"],
      ["åŒæ™‚ã«é¸æŠžã§ãã¾ã›ã‚“","Cannot select simultaneously"],
      ["æ—¢ã«é¸æŠžã•ã‚Œã¦ã„ã¾ã™","Already selected"],
      ["å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ","Do you want to delete this?"],
      ["é¸æŠžè‚¢ãŒã‚ã‚Šã¾ã›ã‚“","No selectable items"],
      ["è¿½åŠ ã—ã¾ã—ãŸ","Added!"],
      ["æœ‰åŠ¹ãªå…¥åŠ›ã§ã¯ã‚ã‚Šã¾ã›ã‚“","Invalid input."],
      ["ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ","Cancelled."],
      ["é¸æŠžã§ãã¾ã›ã‚“","Cannot select this item."],
      ["ç¢ºèª","Confirm"],
      ["ã¯ã„","Yes"],
      ["ã„ã„ãˆ","No"],
      ["é¸æŠžä¸­","Selected"],
      ["çµæžœ","Result"],
      ["è£…å‚™ä¸€è¦§","Spec List"],
      ["ã‚³ãƒ”ãƒ¼ç”¨ãƒ†ã‚­ã‚¹ãƒˆ","Text to Copy"]
    ]);

    const placeholderReplacements = new Map([
      ["ã“ã“ã«å…¥åŠ›","Type here"],
      ["æ‰‹å…¥åŠ›ã§è¿½åŠ ","Add manually"],
      ["æ¤œç´¢","Search"]
    ]);

    // ðŸ”§ ç‰¹æ®Šç¿»è¨³å¯¾å¿œï¼šã€Œã€‡ã€‡ã¯ã€‡ã€‡ã¨åŒæ™‚ã«é¸æŠžã§ãã¾ã›ã‚“ã€â†’ã€ŒCannot select ã€‡ã€‡ and ã€‡ã€‡ at onceã€
    function replaceText(str) {
      if (!str) return str;
      let out = str;

      const simultaneousPattern = /(.*?)ã¯(.*?)ã¨åŒæ™‚ã«é¸æŠžã§ãã¾ã›ã‚“/;
      if (simultaneousPattern.test(out)) {
        out = out.replace(simultaneousPattern, "Cannot select $1 and $2 at once");
      }

      for (const [jp, en] of replacements) {
        if (out.includes(jp)) out = out.split(jp).join(en);
      }
      return out;
    }

    function translateDoc(doc) {
      try {
        if (doc.title) doc.title = replaceText(doc.title);
        document.title = "Spec Input Tool";
      } catch (e) {}

      const walker = doc.createTreeWalker(doc.body, NodeFilter.SHOW_TEXT, {
        acceptNode(node) {
          const t = node.nodeValue && node.nodeValue.trim();
          if (!t) return NodeFilter.FILTER_REJECT;
          for (const [jp] of replacements) {
            if (t.includes(jp)) return NodeFilter.FILTER_ACCEPT;
          }
          if (/(.*?)ã¯(.*?)ã¨åŒæ™‚ã«é¸æŠžã§ãã¾ã›ã‚“/.test(t)) return NodeFilter.FILTER_ACCEPT;
          return NodeFilter.FILTER_REJECT;
        }
      });
      const nodes = [];
      while (walker.nextNode()) nodes.push(walker.currentNode);
      for (const node of nodes) node.nodeValue = replaceText(node.nodeValue);

      const all = doc.querySelectorAll('[placeholder], input, textarea, [aria-label]');
      for (const el of all) {
        const ph = el.getAttribute('placeholder');
        if (ph) {
          let phOut = ph;
          for (const [jp, en] of placeholderReplacements) {
            if (phOut.includes(jp)) phOut = phOut.split(jp).join(en);
          }
          if (phOut !== ph) el.setAttribute('placeholder', phOut);
        }
        const aria = el.getAttribute('aria-label');
        if (aria) {
          const ariaOut = replaceText(aria);
          if (ariaOut !== aria) el.setAttribute('aria-label', ariaOut);
        }
      }

      doc.querySelectorAll('h1,h2,header .title,.page-title').forEach(h=>{
        const out = replaceText(h.textContent);
        if (out !== h.textContent) h.textContent = out;
      });
    }

    function attachInterceptors(win) {
      const origAlert = win.alert.bind(win);
      const origConfirm = win.confirm.bind(win);
      const origPrompt = win.prompt.bind(win);

      win.alert = (msg) => origAlert(replaceText(String(msg)));
      win.confirm = (msg) => origConfirm(replaceText(String(msg)));
      win.prompt = (msg, defVal) => origPrompt(replaceText(String(msg)), defVal);

      const doc = win.document;
      let pending = false;
      const observer = new MutationObserver(() => {
        if (pending) return;
        pending = true;
        win.requestAnimationFrame(() => {
          try { translateDoc(doc); } finally { pending = false; }
        });
      });
      observer.observe(doc, { childList: true, subtree: true, characterData: true });

      doc.addEventListener('input', () => translateDoc(doc), true);
      doc.addEventListener('change', () => translateDoc(doc), true);

      translateDoc(doc);
      setTimeout(() => translateDoc(doc), 150);
      setTimeout(() => translateDoc(doc), 500);
      setTimeout(() => translateDoc(doc), 1200);
    }

    const frame = document.getElementById('app');
    frame.addEventListener('load', () => {
      try {
        const doc = frame.contentDocument;
        const win = frame.contentWindow;
        if (!doc || !win) return;
        attachInterceptors(win);
      } catch (e) {
        setTimeout(() => {
          try {
            const doc = frame.contentDocument;
            const win = frame.contentWindow;
            if (!doc || !win) return;
            attachInterceptors(win);
          } catch {}
        }, 150);
      }
    });
  })();
  </script>
</body>
</html>
